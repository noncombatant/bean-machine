<!DOCTYPE html>
<meta charset="UTF-8">
<link rel="stylesheet" href="index.css"/>
<title>Implementation Notes</title>

<div class="mainText">

<h1>Implementation Notes</h1>

<h2>Client</h2>

<p>The client web application uses a deliberately simple (even simplistic)
design. The user interface is an infinite scroll of media items, with a playback
control panel at the top of the page. Search and catalog listing are the same
operation.</p>

<p>Search is implemented as a linear search over a sequence of media item
metadata records stored in RAM on the server.</p>

<p>The client is implemented as an HTML frame, a stylesheet, and a JavaScript
file. It uses no JS frameworks or CSS preprocessors.</p>

<p>The client pre-fetches a few items after a search completes, and stores them
as Blobs. Sending the entire catalog to the client enables the client to search
for and play cached and pre-fetched content when offline. When the <a
href="https://www.chromestatus.com/feature/6284708426022912">Native Filesystem
API</a> or a similar API becomes available, we can use that, and a client’s
local copy of the media store will gradually become a mirror of the
server’s.</p>

<p>The code is a small collection of global data objects and plain functions
that operate on them and on the DOM. It makes no use of JavaScript classes or
custom HTML elements.</p>

<h2>Server</h2>

<p>The server software is also deliberately simple in most areas, although the
authentication mechanism is perhaps overdone (and perhaps also underdone). The
server can perform several functions:</p>

<ul>
<li>Building the catalog file
<li>Installing the front-end files in the media store directory
<li>Serving the application, including search queries
<li>Setting user passwords
<li>Checking user passwords
<li>Searching the media store for duplicate files
<li>Searching the media store for empty directories
</ul>

<p>The server creates a self-signed x.509 certificate if it doesn’t find a
certificate in the configuration directory
(<code>$HOME/.bean-machine</code>).</p>

<p>A key area for improvement in the server is making logging more consistent
and concise.</p>

</div>
